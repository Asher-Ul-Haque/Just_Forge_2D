plugins {
    id 'java'
}

repositories {
    flatDir {
        dirs 'libs' // This is where the engine JAR is located
    }
    mavenCentral()
}

dependencies {
    implementation name: 'Just-Forge-2D-SNAPSHOT-1.2.jar' // Assuming the engine JAR is named 'engine.jar'
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

jar {
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    manifest {
        attributes(
                'Class-Path': configurations.runtimeClasspath.collect { it.getName() }.join(' '),
                'Main-Class': 'com.somebody.engine.Main' // This should point to the actual main class in the engine JAR
        )
    }
}

task runGame(type: JavaExec) {
    mainClass = 'com.somebody.engine.Main' // Replace with the actual fully qualified name of the main class in your engine
    classpath = sourceSets.main.runtimeClasspath + configurations.runtimeClasspath
}

